define ("local_generatorbadge/badgeapp",["jquery"],function(a){var b="#fff",c=document.getElementById("myCanvas"),d=c.getContext("2d");d.font="30px Tahoma";d.textAlign="center";CanvasRenderingContext2D.prototype.fillTextCircle=function(a,b,c,d,e){a=a.toUpperCase();var f=.75*Math.PI/a.length;this.save();this.translate(b,c);this.rotate(e);for(var g=0;g<a.length;g++){this.save();this.rotate(g*f);this.fillText(a[g],0,-d);this.restore()}this.restore()};CanvasRenderingContext2D.prototype.fillCourseTitle=function(a,b,c,d,e){var f=a.toUpperCase().concat();f=f.split("").reverse().join("");var g=0,h=0;if(5>=f.length&&2<f.length){g=.8;h=.3}else if(3>f.length){g=.9;h=.2}else{g=0;h=.75}var j=h*Math.PI/f.length;this.save();this.translate(b,c);this.rotate(e+g);for(var k=0;k<f.length;k++){this.save();this.rotate(k*j);this.fillText(f[k],0,d);this.restore()}this.restore()};function e(){d.beginPath();d.arc(172,175,170,.25,1.9*Math.PI,!1);d.strokeStyle="#000";d.fillStyle="#fff";d.fill();d.fillStyle="#000";d.fillTextCircle("Future Skills",172,175,140,Math.PI/.61);d.stroke();d.closePath();d.beginPath();d.moveTo(349,140);d.arc(334,139,15,0,2*Math.PI);d.strokeStyle="#7770ae";d.fillStyle="#fff";d.fill();d.stroke();d.closePath();d.beginPath();d.moveTo(349,170);d.arc(334,170,15,0,2*Math.PI);d.strokeStyle="#149fa8";d.fillStyle="#fff";d.fill();d.stroke();d.closePath();d.beginPath();d.moveTo(349,200);d.arc(334,201,15,0,2*Math.PI);d.strokeStyle="#1989ca";d.fillStyle="#fff";d.fill();d.stroke();d.closePath();d.beginPath();d.moveTo(300,175);d.arc(175,175,125,0,2*Math.PI);d.strokeStyle="#000";d.fillStyle="#fff";d.fill();d.stroke();d.closePath()}a(".techBadge").change(function(){d.beginPath();d.moveTo(349,140);if(!a(this).prop("checked")){d.arc(334,139,15,0,2*Math.PI);d.strokeStyle="#7770ae";d.fillStyle="#fff"}if(a(this).prop("checked")){d.arc(334,139,15,0,2*Math.PI);d.strokeStyle="#7770ae";d.fillStyle="#7770ae"}d.fill();d.stroke();d.save()});d.stroke();d.closePath();a(".digitalBadge").change(function(){d.beginPath();d.moveTo(349,170);if(!a(this).prop("checked")){d.arc(334,170,15,0,2*Math.PI);d.strokeStyle="#149fa8";d.fillStyle="#fff"}if(a(this).prop("checked")){d.arc(334,170,15,0,2*Math.PI);d.strokeStyle="#149fa8";d.fillStyle="#149fa8"}d.fill();d.stroke();d.save()});d.stroke();d.closePath();a(".classicBadge").click(function(){d.beginPath();d.moveTo(349,200);if(!a(this).prop("checked")){d.arc(334,201,15,0,2*Math.PI);d.strokeStyle="#1989ca";d.fillStyle="#fff"}if(a(this).prop("checked")){d.arc(334,201,15,0,2*Math.PI);d.strokeStyle="#1989ca";d.fillStyle="#1989ca"}d.fill();d.stroke();d.save()});d.stroke();d.closePath();function f(b){a.ajax({type:"POST",url:"http://localhost/moodle/blocks/badgegenerator/savebadge.php",data:{imgBase64:b}}).done(function(){window.console.log("saved")})}function g(){setTimeout(function(){if(confirm("Neuen Badge erstellen?")){window.location.reload()}},2e3)}a(".downloadBtn").click(function(){var b=new Image,d;b.src=c.toDataURL();b.onload=function(){if(!a(".badgeSize").prop("checked")){d=h(b,220,220)}else{d=h(b,512,512)}var c=document.createElement("a");d.onload=function(){c.href=d.src;c.download="future-skills_badge_"+a(".courseTitleInput").val()+".png";c.click();c.remove();g()}}});function h(a,b,c){var d=new Image,e=document.createElement("canvas"),g;e.width=b;e.height=c;e.getContext("2d").drawImage(a,0,0,b,c);d.src=e.toDataURL();g=e.toDataURL();f(g);return d}a(".badgeNumberSettings").on("input","",function(){var c=a(".badgeNumberInput").val(),e=a(".badgeNumberInput-nd").val();d.beginPath();d.moveTo(300,175);d.fillStyle=b;d.fillRect(115,242,120,44);d.fill();if("#000000"===b||"#424242"===b||"#062e0c"===b||"#011e4a"===b||"#003063"===b){d.fillStyle="#fff"}else{d.fillStyle="#000"}if(1===c.length){d.fillText(c,150,280);d.fillText("/",345/2,280)}else if(2===c.length){d.fillText(c,150,280);d.fillText("/",345/2,280)}else{d.fillText(c,140,280);d.fillText("/",345/2,280)}if(0<e.length){d.fillText(e,200,280)}window.console.log(c.length);d.stroke();d.save();d.closePath()});a(".colorBtn").click(function(){b=a(this).val();d.beginPath();d.moveTo(300,175);d.arc(175,175,125,0,2*Math.PI);d.strokeStyle="#000";d.fillStyle=b;d.fill();d.stroke();d.save();d.closePath()});a(".iconBtn01").click(function(){d.fillStyle=b;d.fill();d.fillRect(90,100,170,150);var c=a(".iconBtn img")[0];d.drawImage(c,90,100,170,150);d.save()});a(".iconBtn02").click(function(){d.fillStyle=b;d.fill();d.fillRect(90,100,170,150);var c=a(".iconBtn img")[1];d.drawImage(c,90,100,170,150);d.save()});a(".iconBtn03").click(function(){d.fillStyle=b;d.fill();d.fillRect(90,100,170,150);var c=a(".iconBtn img")[2];d.drawImage(c,90,100,170,150);d.save()});a(".iconBtn04").click(function(){d.fillStyle=b;d.fill();d.fillRect(90,100,170,150);var c=a(".iconBtn img")[3];d.drawImage(c,90,100,170,150);d.save()});a(".iconBtn05").click(function(){d.fillStyle=b;d.fill();d.fillRect(90,100,170,150);var c=a(".iconBtn img")[4];d.drawImage(c,90,100,170,150);d.save()});a(".courseTitleSettingsBadge").on("input",".courseTitleInput",function(){var b=a(".courseTitleInput").val(),c=15-b.length;a(".noteBadge").text("Noch "+c+" Zeichen \xFCbrig...");e();d.fillStyle="#000";d.fillCourseTitle(a(".courseTitleInput").val(),172,175,160,Math.PI/.61)});a(".iconButtonBadge").click(function(b){b.preventDefault();var c=new FormData,d=a(".inputFileBadge")[0].files;if(0<d.length){c.append("my_image",d[0]);a.ajax({url:"http://localhost/moodle/blocks/badgegenerator/upload_badge.php",method:"POST",data:c,processData:!1,contentType:!1,success:function success(b){var c=JSON.parse(b);if(1!==c.error){var d="http://localhost/moodle/blocks/badgegenerator/pix/uploads/"+c.src;document.getElementById("previewBadge").setAttribute("src",d);document.getElementById("previewBadge").style.visibility="visible"}else{a(".errorMSG").text("failed!")}}})}else{a(".errorMSG").text("Please select an image!")}});return{init:function init(){a(document).ready(function(){e();a(".courseTitle").click(function(){a(this).css({backgroundColor:"rgb(0, 48, 100)",borderTopLeftRadius:"20px"});a(".courseTitleSettingsBadge").css({display:"unset"});a(".courseProgramm").css({backgroundColor:"rgb(0, 30, 73)"});a(".courseProgrammSettings").css({display:"none"});a(".badgenumber").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeNumberSettings").css({display:"none"});a(".badgeColor").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeColorSettings").css({display:"none"});a(".badgeIcon").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeIconSettings").css({display:"none"})});a(".courseProgramm").click(function(){a(this).css({backgroundColor:"rgb(0, 48, 100)"});a(".courseProgrammSettings").css({display:"unset"});a(".courseTitle").css({backgroundColor:"rgb(0, 30, 73)",borderTopLeftRadius:"20px"});a(".courseTitleSettingsBadge").css({display:"none"});a(".badgenumber").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeNumberSettings").css({display:"none"});a(".badgeColor").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeColorSettings").css({display:"none"});a(".badgeIcon").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeIconSettings").css({display:"none"})});a(".badgenumber").click(function(){a(this).css({backgroundColor:"rgb(0, 48, 100)"});a(".badgeNumberSettings").css({display:"unset"});a(".courseTitle").css({backgroundColor:"rgb(0, 30, 73)",borderTopLeftRadius:"20px"});a(".courseTitleSettingsBadge").css({display:"none"});a(".courseProgramm").css({backgroundColor:"rgb(0, 30, 73)"});a(".courseProgrammSettings").css({display:"none"});a(".badgeColor").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeColorSettings").css({display:"none"});a(".badgeIcon").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeIconSettings").css({display:"none"})});a(".badgeColor").click(function(){a(this).css({backgroundColor:"rgb(0, 48, 100)"});a(".badgeColorSettings").css({display:"unset"});a(".badgeIcon").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeIconSettings").css({display:"none"});a(".badgenumber").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeNumberSettings").css({display:"none"});a(".courseTitle").css({backgroundColor:"rgb(0, 30, 73)",borderTopLeftRadius:"20px"});a(".courseTitleSettingsBadge").css({display:"none"});a(".courseProgramm").css({backgroundColor:"rgb(0, 30, 73)"});a(".courseProgrammSettings").css({display:"none"})});a(".badgeIcon").click(function(){a(this).css({backgroundColor:"rgb(0, 48, 100)"});a(".badgeIconSettings").css({display:"unset"});a(".badgenumber").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeNumberSettings").css({display:"none"});a(".courseTitle").css({backgroundColor:"rgb(0, 30, 73)",borderTopLeftRadius:"20px"});a(".courseTitleSettingsBadge").css({display:"none"});a(".courseProgramm").css({backgroundColor:"rgb(0, 30, 73)"});a(".courseProgrammSettings").css({display:"none"});a(".badgeColor").css({backgroundColor:"rgb(0, 30, 73)"});a(".badgeColorSettings").css({display:"none"})})})}}});
//# sourceMappingURL=badgeapp.min.js.map
